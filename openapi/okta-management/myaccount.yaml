openapi: 3.0.3
info:
  title: Okta MyAccount APIs
  version: 1.0.0
  description: APIs for managing a user's own emails, phones, and profile.
  termsOfService: https://developer.okta.com/terms/
  contact:
    name: Okta Developer Team
    url: https://developer.okta.com/
    email: devex-public@okta.com
  license:
    name: Apache-2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  x-logo:
    url: logo.svg
    backgroundColor: transparent
    altText: Okta Developer
externalDocs:
  description: Find more info here
  url: https://developer.okta.com
servers:
  - url: https://{yourOktaDomain}
    variables:
      yourOktaDomain:
        default: subdomain.okta.com
        description: The domain of your organization. This can be a provided subdomain of an official okta domain (okta.com, oktapreview.com, etc) or one of your configured custom domains.
tags:
  - name: Email
  - name: Phone
  - name: Profile
x-tagGroups:
  - name: MyAccount
    tags:
      - Email
      - Phone
      - Profile
paths:
  /idp/myaccount/emails:
    get:
      summary: List all Emails
      description: List all emails
      operationId: get-idp-myaccount-emails
      responses:
        '200':
          $ref: '#/components/responses/Email-Array-Response'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.read
      tags:
        - Email
    post:
      summary: Create an Email
      description: Add a new email
      operationId: post-idp-myaccount-emails
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                profile:
                  type: object
                  required:
                    - email
                  properties:
                    email:
                      type: string
                      example: saml.jackson@example.com
                      format: email
                      writeOnly: true
                sendEmail:
                  type: boolean
                  default: true
                  description: Specifies whether Okta should send an email to the end-user or whether the application will handle this itself.
                state:
                  type: string
                  example: JPcFLTwOq7UvoFtmRd3EnyQwsR0PbDSI
                  description: |
                    Any application state that the client wishes to persist across the email challenge flow and receive back at the callback URL defined in the OIDC app configuration. This param is REQUIRED as a mechanism to prove back to the client that the email link was verified.
                  writeOnly: true
                role:
                  type: string
                  enum:
                    - PRIMARY
                    - SECONDARY
                  example: PRIMARY
                  writeOnly: true
              required:
                - profile
            examples:
              New Email:
                value:
                  profile:
                    email: saml.jackson@example.com
                  sendEmail: true
                  role: PRIMARY
                  state: JPcFLTwOq7UvoFtmRd3EnyQwsR0PbDSI
        description: New email
      responses:
        '201':
          $ref: '#/components/responses/Unverified-Email-Response'
        '400':
          $ref: '#/components/responses/Error-InvalidEmail-Response-400'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-Email-Response-403'
        '409':
          $ref: '#/components/responses/Error-EmailConflict-Response-409'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.manage
      tags:
        - Email
  /idp/myaccount/emails/{id}:
    parameters:
      - schema:
          type: string
          example: 69dca29c2d8dbb0dca14395ccdb92317
        name: id
        in: path
        required: true
    get:
      summary: Retrieve an Email
      description: Get an email by email id
      operationId: 'get-idp-myaccount-emails-:id:'
      responses:
        '200':
          $ref: '#/components/responses/Verified-Email-Response'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.read
      tags:
        - Email
    delete:
      summary: Delete an Email
      description: Delete an email by email id
      operationId: 'delete-idp-myaccount-emails-:id:'
      parameters: []
      responses:
        '204':
          description: No Content
          content:
            application/json;okta-version=1.0.0: {}
        '400':
          $ref: '#/components/responses/Error-InvalidEmailDeletion-400'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-NoAccessForAdminUser-Response-403'
        '404':
          $ref: '#/components/responses/Error-EmailResourceNotFound-Response-404'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.manage
      tags:
        - Email
  /idp/myaccount/emails/{id}/challenge:
    parameters:
      - schema:
          type: string
          example: 00T196qTp3LIMZQ0L0g3
        name: id
        in: path
        required: true
    post:
      summary: Send an Email Challenge
      description: Send a challenge on an email
      operationId: post-idp-myaccount-emails-id-challenge
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                state:
                  type: string
                  example: JPcFLTwOq7UvoFtmRd3EnyQwsR0PbDSI
                  writeOnly: true
              required:
                - state
            examples:
              Challenge Example:
                value:
                  state: JPcFLTwOq7UvoFtmRd3EnyQwsR0PbDSI
      responses:
        '201':
          description: Created
          headers: {}
          content:
            application/json;okta-version=1.0.0:
              schema:
                description: ''
                type: object
                example:
                  id: myaccount.2wdtXPtmS0WpKq4bnjlYIw
                  status: UNVERIFIED
                  expiresAt: '2022-02-01T00:19:08.220Z'
                  profile:
                    email: s.jackson@example.com
                  _links:
                    verify:
                      href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.2wdtXPtmS0WpKq4bnjlYIw/verify
                      hints:
                        allow:
                          - POST
                    poll:
                      href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.2wdtXPtmS0WpKq4bnjlYIw
                      hints:
                        allow:
                          - GET
                properties:
                  id:
                    type: string
                    minLength: 1
                  status:
                    type: string
                    minLength: 1
                  expiresAt:
                    type: string
                    minLength: 1
                  profile:
                    type: object
                    required:
                      - email
                    properties:
                      email:
                        type: string
                        minLength: 1
                  _links:
                    type: object
                    required:
                      - verify
                      - poll
                    properties:
                      verify:
                        type: object
                        required:
                          - href
                          - hints
                        properties:
                          href:
                            type: string
                            minLength: 1
                          hints:
                            type: object
                            required:
                              - allow
                            properties:
                              allow:
                                type: array
                                items:
                                  type: string
                      poll:
                        type: object
                        required:
                          - href
                          - hints
                        properties:
                          href:
                            type: string
                            minLength: 1
                          hints:
                            type: object
                            required:
                              - allow
                            properties:
                              allow:
                                type: array
                                items:
                                  type: string
                required:
                  - id
                  - status
                  - expiresAt
                  - profile
                  - _links
              examples:
                challenge created response:
                  value:
                    id: myaccount.2wdtXPtmS0WpKq4bnjlYIw
                    status: UNVERIFIED
                    expiresAt: '2022-02-01T00:19:08.220Z'
                    profile:
                      email: s.jackson@example.com
                    _links:
                      verify:
                        href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.2wdtXPtmS0WpKq4bnjlYIw/verify
                        hints:
                          allow:
                            - POST
                      poll:
                        href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.2wdtXPtmS0WpKq4bnjlYIw
                        hints:
                          allow:
                            - GET
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-Email-Response-403'
        '404':
          $ref: '#/components/responses/Error-EmailResourceNotFound-Response-404'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.manage
      tags:
        - Email
  /idp/myaccount/emails/{id}/challenge/{challengeId}:
    parameters:
      - schema:
          type: string
          example: 00T196qTp3LIMZQ0L0g3
        name: id
        in: path
        required: true
      - schema:
          type: string
          example: x1MDGzUb
        name: challengeId
        in: path
        required: true
    get:
      summary: Poll the Challenge for Email Magic Link
      description: Poll for challenge status for an email
      operationId: get-idp-myaccount-emails-id-challenge-challengeId
      responses:
        '200':
          description: OK
          content:
            application/json;okta-version=1.0.0:
              schema:
                description: ''
                type: object
                example:
                  id: myaccount.DDvNA6XORA2dIfB894o32g
                  status: UNVERIFIED
                  expiresAt: '2022-02-01T00:41:25.497Z'
                  profile:
                    email: s.jackson@example.com
                  _links:
                    verify:
                      href: https://example.okta.com/idp/myaccount/emails/da03e945d44d8b714da2b9fded39e851/challenge/myaccount.DDvNA6XORA2dIfB894o32g/verify
                      hints:
                        allow:
                          - POST
                    poll:
                      href: https://example.okta.com/idp/myaccount/emails/da03e945d44d8b714da2b9fded39e851/challenge/myaccount.DDvNA6XORA2dIfB894o32g
                      hints:
                        allow:
                          - GET
                properties:
                  id:
                    type: string
                    minLength: 1
                  status:
                    type: string
                    minLength: 1
                  expiresAt:
                    type: string
                    minLength: 1
                  profile:
                    type: object
                    required:
                      - email
                    properties:
                      email:
                        type: string
                        minLength: 1
                  _links:
                    type: object
                    required:
                      - verify
                      - poll
                    properties:
                      verify:
                        type: object
                        required:
                          - href
                          - hints
                        properties:
                          href:
                            type: string
                            minLength: 1
                          hints:
                            type: object
                            required:
                              - allow
                            properties:
                              allow:
                                type: array
                                items:
                                  type: string
                      poll:
                        type: object
                        required:
                          - href
                          - hints
                        properties:
                          href:
                            type: string
                            minLength: 1
                          hints:
                            type: object
                            required:
                              - allow
                            properties:
                              allow:
                                type: array
                                items:
                                  type: string
                required:
                  - id
                  - status
                  - expiresAt
                  - profile
                  - _links
              examples:
                Polling Response Example:
                  value:
                    id: myaccount.DDvNA6XORA2dIfB894o32g
                    status: UNVERIFIED
                    expiresAt: '2022-02-01T00:41:25.497Z'
                    profile:
                      email: s.jackson@example.com
                    _links:
                      verify:
                        href: https://example.okta.com/idp/myaccount/emails/da03e945d44d8b714da2b9fded39e851/challenge/myaccount.DDvNA6XORA2dIfB894o32g/verify
                        hints:
                          allow:
                            - POST
                      poll:
                        href: https://example.okta.com/idp/myaccount/emails/da03e945d44d8b714da2b9fded39e851/challenge/myaccount.DDvNA6XORA2dIfB894o32g
                        hints:
                          allow:
                            - GET
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '404':
          $ref: '#/components/responses/Error-EmailChallengeResourceNotFound-Response-404'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.manage
      tags:
        - Email
  /idp/myaccount/emails/{id}/challenge/{challengeId}/verify:
    parameters:
      - schema:
          type: string
          example: 00T196qTp3LIMZQ0L0g3
        name: id
        in: path
        required: true
      - schema:
          type: string
        name: challengeId
        in: path
        required: true
    post:
      summary: Verify an Email OTP
      description: Verify a otp for an email
      operationId: post-idp-myaccount-emails-id-verify
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                verificationCode:
                  type: string
                  example: '498560'
                  format: password
                  writeOnly: true
              required:
                - verificationCode
            examples:
              OTP Example:
                value:
                  verificationCode: '456058'
      responses:
        '200':
          description: OK
          content:
            application/json;okta-version=1.0.0: {}
        '401':
          $ref: '#/components/responses/Error-VerifyPhoneEmail-Response-401'
        '403':
          $ref: '#/components/responses/Error-Email-Response-403'
        '404':
          $ref: '#/components/responses/Error-EmailChallengeResourceNotFound-Response-404'
      security:
        - OAuth 2.0:
            - okta.myaccount.email.manage
      tags:
        - Email
  /idp/myaccount/phones:
    get:
      summary: List all Phones
      description: Get all my phones
      operationId: get-idp-myaccount-phones
      responses:
        '200':
          $ref: '#/components/responses/Phone-Array-Response'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
      security:
        - OAuth 2.0:
            - okta.myaccount.phone.read
      tags:
        - Phone
    post:
      summary: Create a Phone
      description: Add a new phone
      operationId: post-idp-myaccount-phones
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                profile:
                  type: object
                  properties:
                    phoneNumber:
                      type: string
                      example: 555-555-5555
                sendCode:
                  type: boolean
                  default: true
                method:
                  type: string
                  enum:
                    - SMS
                    - CALL
                  example: SMS
                  writeOnly: true
            examples:
              Okta-Sends-Challenge:
                value:
                  profile:
                    phoneNumber: +1(444)444-4444
                  sendCode: true
                  method: SMS
      responses:
        '201':
          $ref: '#/components/responses/Unverified-Phone-Response'
        '400':
          $ref: '#/components/responses/Error-Create-Phone-Response-400'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-CreateChallengeVerify-Phone-Response-403'
        '409':
          $ref: '#/components/responses/Error-PhoneNumberExists-Response-409'
        '500':
          $ref: '#/components/responses/Error-FailedToSendOutOfBandChallenge-Response-500'
      security:
        - OAuth 2.0:
            - okta.myaccount.phone.manage
      tags:
        - Phone
  /idp/myaccount/phones/{id}:
    parameters:
      - schema:
          type: string
          example: sms10ltpSdwXJCem80g4
        name: id
        in: path
        required: true
    get:
      summary: Retrieve a Phone
      description: Get a phone given a phone id
      operationId: get-idp-myaccount-phones-id
      responses:
        '200':
          $ref: '#/components/responses/Verified-Phone-Response'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '404':
          $ref: '#/components/responses/Error-InvalidFactorId-Response-404'
      security:
        - OAuth 2.0:
            - okta.myaccount.phone.read
      tags:
        - Phone
    delete:
      summary: Delete a Phone
      description: Delete a phone given a phone id
      operationId: delete-idp-myaccount-phones-id
      responses:
        '204':
          description: No Content
          content:
            application/json;okta-version=1.0.0: {}
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-Delete-Phone-Response-403'
        '404':
          $ref: '#/components/responses/Error-InvalidFactorId-Response-404'
      security:
        - OAuth 2.0:
            - okta.myaccount.phone.manage
      tags:
        - Phone
  /idp/myaccount/phones/{id}/challenge:
    parameters:
      - schema:
          type: string
          example: sms18vtfKgzqDhNqP0g4
        name: id
        in: path
        required: true
    post:
      summary: Send a Phone Challenge
      description: Send challenge for a phone
      operationId: post-idp-myaccount-phones-id-challenge
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                method:
                  type: string
                  example: SMS
                  enum:
                    - SMS
                    - CALL
                  writeOnly: true
                retry:
                  type: boolean
                  default: false
              required:
                - method
            examples:
              Send-SMS-Challenge:
                value:
                  method: SMS
              Send-Voice-Challenge:
                value:
                  method: CALL
      responses:
        '200':
          $ref: '#/components/responses/Challenged-Phone-Response'
        '400':
          $ref: '#/components/responses/Error-Challenge-Phone-Response-400'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-CreateChallengeVerify-Phone-Response-403'
        '404':
          $ref: '#/components/responses/Error-InvalidFactorId-Response-404'
        '500':
          $ref: '#/components/responses/Error-FailedToSendOutOfBandChallenge-Response-500'
      security:
        - OAuth 2.0:
            - okta.myaccount.phone.manage
      tags:
        - Phone
  /idp/myaccount/phones/{id}/verify:
    parameters:
      - schema:
          type: string
          example: sms18vtfKgzqDhNqP0g4
        name: id
        in: path
        required: true
    post:
      summary: Verify a Phone Challenge
      description: Verify a phone challenge
      operationId: post-idp-myaccount-phones-id-verify
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                verificationCode:
                  type: string
                  example: '492592'
                  format: password
                  writeOnly: true
              required:
                - verificationCode
            examples:
              Verify-SMS-Challenge:
                value:
                  verificationCode: '048284'
      responses:
        '204':
          description: No Content
          content:
            application/json;okta-version=1.0.0: {}
        '400':
          $ref: '#/components/responses/Error-Verify-Phone-Response-400'
        '401':
          $ref: '#/components/responses/Error-VerifyPhoneEmail-Response-401'
        '403':
          $ref: '#/components/responses/Error-CreateChallengeVerify-Phone-Response-403'
        '404':
          $ref: '#/components/responses/Error-InvalidFactorId-Response-404'
        '409':
          $ref: '#/components/responses/Error-InvalidTransaction-Response-409'
      security:
        - OAuth 2.0:
            - okta.myaccount.phone.manage
      tags:
        - Phone
  /idp/myaccount/profile:
    get:
      summary: Retrieve my Profile
      description: Get my profile
      operationId: get-idp-myaccount-profile
      responses:
        '200':
          description: OK
          content:
            application/json;okta-version=1.0.0:
              schema:
                $ref: '#/components/schemas/Profile'
              examples:
                Success Response:
                  value:
                    createdAt: '2020-01-14T20:05:32.000Z'
                    modifiedAt: '2020-01-14T20:05:32.000Z'
                    profile:
                      customBoolean: false
                      foo: bar
                      login: example@ex.ample.com
                      mobilePhone: +1(555)555-5555
                      customInteger: 42
                    _links:
                      self:
                        href: https://example.okta.com/idp/myaccount/profile
                      describedBy:
                        href: https://example.okta.com/idp/myaccount/profile/schema
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
      security:
        - OAuth 2.0:
            - okta.myaccount.profile.read
            - okta.myaccount.profile.manage
      tags:
        - Profile
    put:
      summary: Replace my Profile
      description: Update my profile
      operationId: put-idp-myaccount-profile
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                profile:
                  type: object
            examples:
              Update Profile:
                value:
                  profile:
                    customBoolean: true
                    foo: bar
                    login: example@ex.ample.com
                    mobilePhone: 555-555-5555
                    customInteger: 42
      responses:
        '200':
          description: OK
          content:
            application/json;okta-version=1.0.0:
              schema:
                $ref: '#/components/schemas/Profile'
              examples:
                Success Response:
                  value:
                    createdAt: '2020-01-14T20:05:32.000Z'
                    modifiedAt: '2020-01-14T20:05:32.000Z'
                    profile:
                      customBoolean: true
                      foo: bar
                      login: example@ex.ample.com
                      mobilePhone: 555-555-5555
                      customInteger: 42
                    _links:
                      self:
                        href: https://example.okta.com/idp/myaccount/profile
                      describedBy:
                        href: https://example.okta.com/idp/myaccount/profile/schema
        '400':
          $ref: '#/components/responses/Error-UpdateProfile-Response-400'
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
        '403':
          $ref: '#/components/responses/Error-NoAccessForAdminUser-Response-403'
      security:
        - OAuth 2.0:
            - okta.myaccount.profile.manage
      tags:
        - Profile
  /idp/myaccount/profile/schema:
    get:
      summary: Retrieve my Profile Schema
      description: Get my profile schema
      operationId: get-idp-myaccount-profile-schema
      responses:
        '200':
          description: OK
          content:
            application/json;okta-version=1.0.0:
              schema:
                $ref: '#/components/schemas/Schema'
              examples:
                Success Response:
                  value:
                    properties:
                      customBoolean:
                        permissions:
                          SELF: READ_WRITE
                        title: customBoolean
                        type: boolean
                      foo:
                        permissions:
                          SELF: READ_ONLY
                        title: foo
                        type: string
                      login:
                        maxLength: 100
                        minLength: 5
                        permissions:
                          SELF: READ_ONLY
                        required: true
                        title: Username
                        type: string
                      mobilePhone:
                        maxLength: 100
                        permissions:
                          SELF: READ_WRITE
                        title: Mobile phone
                        type: string
                      customInteger:
                        permissions:
                          SELF: READ_WRITE
                        title: customInteger
                        type: integer
                    _links:
                      self:
                        href: https://example.okta.com/idp/myaccount/profile/schema
                      user:
                        href: https://example.okta.com/idp/myaccount/profile
        '401':
          $ref: '#/components/responses/Error-IdpMyAccountNotEnabled-Response-401'
      security:
        - OAuth 2.0:
            - okta.myaccount.profile.read
            - okta.myaccount.profile.manage
      tags:
        - Profile
components:
  schemas:
    Email:
      description: Email Object
      type: object
      properties:
        id:
          type: string
          minLength: 1
          readOnly: true
        profile:
          type: object
          required:
            - email
          properties:
            email:
              type: string
              minLength: 1
        roles:
          type: array
          items:
            type: string
        status:
          type: string
          minLength: 1
          readOnly: true
        _links:
          type: object
          properties:
            self:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
            challenge:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
            verify:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
            poll:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
      required:
        - id
        - status
        - profile
        - roles
    Error:
      description: Standard API Error Object
      type: object
      properties:
        errorCauses:
          type: array
          items:
            type: object
            properties:
              errorSummary:
                type: string
                example: Bad request because XYZ is missing.
                readOnly: true
        errorCode:
          type: string
          example: E0000001
          readOnly: true
        errorId:
          type: string
          example: oaeWGQKoQHeQmy0u8w8bPwi_Q
          readOnly: true
        errorLink:
          type: string
          example: E0000001
          readOnly: true
        errorSummary:
          type: string
          example: Bad request because XYZ is missing.
          readOnly: true
    Phone:
      description: Phone Object
      type: object
      properties:
        id:
          type: string
          minLength: 1
          readOnly: true
        profile:
          type: object
          required:
            - phoneNumber
          properties:
            phoneNumber:
              type: string
              minLength: 1
        status:
          type: string
          minLength: 1
          readOnly: true
        _links:
          type: object
          properties:
            self:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
            challenge:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
            verify:
              type: object
              properties:
                href:
                  type: string
                  minLength: 1
                hints:
                  type: object
                  properties:
                    allow:
                      type: array
                      items:
                        type: string
      required:
        - id
        - status
        - profile
    Profile:
      description: Profile object based on the user's directory profile schema (based on UD).
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
          readOnly: true
        modifiedAt:
          type: string
          format: date-time
          readOnly: true
        profile:
          type: object
        _links:
          type: object
          properties:
            self:
              type: object
              properties:
                href:
                  type: string
                  format: uri
                  readOnly: true
            describedBy:
              type: object
              properties:
                href:
                  type: string
                  format: uri
                  readOnly: true
    Schema:
      title: Schema
      description: Describes a user's directory profile schema (based on UD).
      type: object
      properties:
        properties:
          type: object
          description: Based on https://developer.okta.com/docs/reference/api/schemas/#schema-properties
          readOnly: true
        _links:
          type: object
          properties:
            self:
              type: object
              properties:
                href:
                  type: string
                  format: uri
                  readOnly: true
            user:
              type: object
              properties:
                href:
                  type: string
                  format: uri
                  readOnly: true
  responses:
    Verified-Email-Response:
      description: Example response
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Email'
          examples:
            Success Response:
              value:
                id: 69dca29c2d8dbb0dca14395ccdb92317
                status: VERIFIED
                roles:
                  - PRIMARY
                profile:
                  email: saml.jackson@example.com
                _links:
                  self:
                    href: https://example.okta.com/idp/myaccount/emails/69dca29c2d8dbb0dca14395ccdb92317
                    hints:
                      allow:
                        - GET
                  challenge:
                    href: https://example.okta.com/idp/myaccount/emails/69dca29c2d8dbb0dca14395ccdb92317/challenge
                    hints:
                      allow:
                        - POST
    Unverified-Email-Response:
      description: Example response
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Email'
          examples:
            Success Response:
              value:
                id: e2a84ed3cc538f75457596faa74a4532
                status: UNVERIFIED
                roles:
                  - PRIMARY
                profile:
                  email: s.jackson@company.com
                _links:
                  self:
                    href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532
                    hints:
                      allow:
                        - GET
                        - DELETE
                  challenge:
                    href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge
                    hints:
                      allow:
                        - POST
                  verify:
                    href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.IDseIErVSEiFlLyAbzSp5Q/verify
                    hints:
                      allow:
                        - POST
                  poll:
                    href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.IDseIErVSEiFlLyAbzSp5Q
                    hints:
                      allow:
                        - GET
    Email-Array-Response:
      description: Example response
      content:
        application/json;okta-version=1.0.0:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Email'
          examples:
            Success Response:
              value:
                - id: 69dca29c2d8dbb0dca14395ccdb92317
                  status: VERIFIED
                  roles:
                    - PRIMARY
                  profile:
                    email: saml.jackson@example.com
                  _links:
                    self:
                      href: https://example.okta.com/idp/myaccount/emails/69dca29c2d8dbb0dca14395ccdb92317
                      hints:
                        allow:
                          - GET
                    challenge:
                      href: https://example.okta.com/idp/myaccount/emails/69dca29c2d8dbb0dca14395ccdb92317/challenge
                      hints:
                        allow:
                          - POST
                - id: e2a84ed3cc538f75457596faa74a4532
                  status: UNVERIFIED
                  roles:
                    - PRIMARY
                  profile:
                    email: s.jackson@company.com
                  _links:
                    self:
                      href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532
                      hints:
                        allow:
                          - GET
                          - DELETE
                    challenge:
                      href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge
                      hints:
                        allow:
                          - POST
                    verify:
                      href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.IDseIErVSEiFlLyAbzSp5Q/verify
                      hints:
                        allow:
                          - POST
                    poll:
                      href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.IDseIErVSEiFlLyAbzSp5Q
                      hints:
                        allow:
                          - GET
    Phone-Array-Response:
      description: Example response
      content:
        application/json;okta-version=1.0.0:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Phone'
          examples:
            Success Response:
              value:
                - id: sms10ltpSdwXJCem80g4
                  status: VERIFIED
                  profile:
                    phoneNumber: '+13333333333'
                  _links:
                    self:
                      href: https://example.okta.com/idp/myaccount/phones/sms10ltpSdwXJCem80g4
                      hints:
                        allow:
                          - GET
                          - DELETE
                    challenge:
                      href: https://example.okta.com/idp/myaccount/phones/sms10ltpSdwXJCem80g4/challenge
                      hints:
                        allow:
                          - POST
                - id: sms18vrvVDDmi4Qlz0g4
                  status: UNVERIFIED
                  profile:
                    phoneNumber: '+12222222222'
                  _links:
                    self:
                      href: https://example.okta.com/idp/myaccount/phones/sms18vrvVDDmi4Qlz0g4
                      hints:
                        allow:
                          - GET
                          - DELETE
                    challenge:
                      href: https://example.okta.com/idp/myaccount/phones/sms18vrvVDDmi4Qlz0g4/challenge
                      hints:
                        allow:
                          - POST
                    verify:
                      href: https://example.okta.com/idp/myaccount/phones/sms18vrvVDDmi4Qlz0g4/verify
                      hints:
                        allow:
                          - POST
    Unverified-Phone-Response:
      description: Example response
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Phone'
          examples:
            Success Response:
              value:
                id: sms18vtfKgzqDhNqP0g4
                status: UNVERIFIED
                profile:
                  phoneNumber: +1(444)444-4444
                _links:
                  self:
                    href: https://example.okta.com/idp/myaccount/phones/sms18vtfKgzqDhNqP0g4
                    hints:
                      allow:
                        - GET
                        - DELETE
                  challenge:
                    href: https://example.okta.com/idp/myaccount/phones/sms18vtfKgzqDhNqP0g4/challenge
                    hints:
                      allow:
                        - POST
                  verify:
                    href: https://example.okta.com/idp/myaccount/phones/sms18vtfKgzqDhNqP0g4/verify
                    hints:
                      allow:
                        - POST
    Verified-Phone-Response:
      description: Example response
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Phone'
          examples:
            Success Response:
              value:
                id: sms10ltpSdwXJCem80g4
                status: VERIFIED
                profile:
                  phoneNumber: +1(333)333-3333
                _links:
                  self:
                    href: https://example.okta.com/idp/myaccount/phones/sms10ltpSdwXJCem80g4
                    hints:
                      allow:
                        - GET
                        - DELETE
                  challenge:
                    href: https://example.okta.com/idp/myaccount/phones/sms10ltpSdwXJCem80g4/challenge
                    hints:
                      allow:
                        - POST
    Challenged-Phone-Response:
      description: Example response after challenging a phone
      content:
        application/json;okta-version=1.0.0:
          schema:
            type: object
            properties:
              _links:
                type: object
                properties:
                  verify:
                    type: object
                    required:
                      - href
                      - hints
                    properties:
                      href:
                        type: string
                        minLength: 1
                      hints:
                        type: object
                        required:
                          - allow
                        properties:
                          allow:
                            type: array
                            items:
                              type: string
          examples:
            Success Response:
              value:
                _links:
                  verify:
                    href: https://example.okta.com/idp/myaccount/emails/e2a84ed3cc538f75457596faa74a4532/challenge/myaccount.2wdtXPtmS0WpKq4bnjlYIw/verify
                    hints:
                      allow:
                        - POST
    Error-InvalidFactorId-Response-404:
      description: Not Found
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Phone Factor Id - 404:
              value:
                errorCode: E0000008
                errorSummary: The requested path was not found
                errorLink: E0000008
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid factor id, no phone factor found.
    Error-NoAccessForAdminUser-Response-403:
      description: Forbidden
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            No Access For Admin User - 403:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: An admin user cannot access a non-admin endpoint.
    Error-FailedToSendOutOfBandChallenge-Response-500:
      description: Internal Server Error
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Failed To Send Out Of Band Challenge - 500:
              value:
                errorCode: E0000138
                errorSummary: There was an internal error with call provider(s).
                errorLink: E0000138
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Failed to send the out of band OTP challenge. Set "retry" to "true" in the API request body and resubmit the API call to the endpoint.
    Error-InvalidTransaction-Response-409:
      description: Conflict
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Transaction - 409:
              value:
                errorCode: E0000157
                errorSummary: 'Another authenticator with key: transactionHandle is already active.'
                errorLink: E0000157
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Failed to find a transaction. Either the challenge was answered or the factor id is invalid.
    Error-UpdateProfile-Response-400:
      description: Bad Request
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Email Update From Profile:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: forUpdate'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: You cannot update email attributes using the profile endpoint. Use the emails endpoint to make any required changes.
            Invalid Value Type For Property:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: forUpdate'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid value data type for property 'some-property'
            Missing Property Value For Self Update:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: forUpdate'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Property 'some-property' needs a value passed.  To unset it, explicitly set it to null.
            Read Only Property Changed For Self Update:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: forUpdate'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Property 'some-property' is read only.  The value supplied must exactly match the existing value.
            Corrupt Profile Prevents Self Update:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: forUpdate'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Your profile is corrupt in a way that requires administrative intervention.  Please contact support.
            Concealed Or Unknown Property For Self Update:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: forUpdate'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Property 'some-property' does not exist or is not accessible.
    Error-PhoneNumberExists-Response-409:
      description: Conflict
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Phone Number Exists - 409:
              value:
                errorCode: E0000157
                errorSummary: 'Another authenticator with key: +14161111111 is already active.'
                errorLink: E0000157
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: This phone number already exists in the user account.
    Error-InvalidEmailDeletion-400:
      description: Bad Request
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Email Deletion - 400:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Email'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: 'Can''t delete a verified email address: example@email.com, role=PRIMARY'
    Error-InvalidEmail-Response-400:
      description: Bad Request
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Email - 400:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Email'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid email address.
    Error-EmailConflict-Response-409:
      description: Conflict
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Email Conflict - 409:
              value:
                errorCode: E0000157
                errorSummary: 'Another authenticator with key: Email is already active.'
                errorLink: E0000157
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: The email example@email.com is already registered to the current user profile.
    Error-EmailResourceNotFound-Response-404:
      description: Not Found
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Email Resource Not Found - 404:
              value:
                errorCode: E0000007
                errorSummary: 'Not found: Resource not found: 796bc844c1802c5ad5a65e1dbd26c30a (UserProfileEmail)'
                errorLink: E0000007
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses: []
    Error-EmailChallengeResourceNotFound-Response-404:
      description: Not Found
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Email Challenge Resource Not Found - 404:
              value:
                errorCode: E0000007
                errorSummary: 'Not found: Resource not found: myaccount.WJLzOhehQwSVUFLVTy2ywb (IdpMyAccountChallenge)'
                errorLink: E0000007
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses: []
    Error-Email-Response-403:
      description: Forbidden
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            No Access For Admin User:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: An admin user cannot access a non-admin endpoint.
            Secondary Email:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Secondary email is not enabled as an authenticator for your org.
    Error-Create-Phone-Response-400:
      description: Bad Request
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Method:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Method'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid method some_invalid_method in the request.
            Not A Number:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Error type: NOT_A_NUMBER. The string supplied did not seem to be a phone number.'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid phone number.
            Invalid Country Code:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Error type: INVALID_COUNTRY_CODE. Could not interpret numbers after plus-sign.'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid phone number.
            Too Long:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Error type: TOO_LONG. The string supplied is too long to be a phone number.'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid phone number.
            Invalid Transaction Data Type:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Transaction'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid transaction.
            Cardinality Max Reached:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Exceeded cardinality max'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: This user account has reached the maximum number of enrolled phone numbers.
    Error-Challenge-Phone-Response-400:
      description: Bad Request
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Method:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Method'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid method some_invalid_method in the request.
            Invalid Transaction Data Type:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Transaction'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid transaction.
    Error-Verify-Phone-Response-400:
      description: Bad Request
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            Invalid Method:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Method'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid method some_invalid_method in the request.
            Invalid Transaction Data Type:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: Transaction'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid transaction.
            Invalid Phone Factor Id:
              value:
                errorCode: E0000001
                errorSummary: 'Api validation failed: factorId and/or verificationCode'
                errorLink: E0000001
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Invalid factor id, no phone factor found.
    Error-IdpMyAccountNotEnabled-Response-401:
      description: Unauthorized
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            IDP MyAccount not enabled - 401:
              value:
                errorCode: E0000015
                errorSummary: You do not have permission to access the feature you are requesting
                errorLink: E0000015
                errorId: oaeStOuPPxDRUm3PJhf-tL7bQ
                errorCauses: []
    Error-VerifyPhoneEmail-Response-401:
      description: Unauthorized
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            IDP MyAccount not enabled - 401:
              value:
                errorCode: E0000015
                errorSummary: You do not have permission to access the feature you are requesting
                errorLink: E0000015
                errorId: oaeStOuPPxDRUm3PJhf-tL7bQ
                errorCauses: []
            Unauthorized User - 401:
              value:
                errorCode: E0000004
                errorSummary: Authentication failed
                errorLink: E0000004
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: User is not authorized.
            User Failed To Answer Challenge - 401:
              value:
                errorCode: E0000004
                errorSummary: Authentication failed
                errorLink: E0000004
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: The verification challenge failed due to an invalid code.
    Error-CreateChallengeVerify-Phone-Response-403:
      description: Forbidden
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            No Access For Admin User:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: An admin user cannot access a non-admin endpoint.
            Phone Authenticator Disabled:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Phone authenticator is not enabled for your org.
            Invalid Authentication Method Type:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Method some_invalid_method is not enabled for your org.
    Error-Delete-Phone-Response-403:
      description: Forbidden
      content:
        application/json;okta-version=1.0.0:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            No Access For Admin User:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: An admin user cannot access a non-admin endpoint.
            Phone Authenticator Disabled:
              value:
                errorCode: E0000038
                errorSummary: This operation is not allowed in the user's current status.
                errorLink: E0000038
                errorId: oaejUwz8U5FQ_SyggQwz1kC3w
                errorCauses:
                  - errorSummary: Phone authenticator is not enabled for your org.
  securitySchemes:
    OAuth 2.0:
      type: oauth2
      description: 'Pass the access_token as the value of the Authorization header: `Authorization: Bearer {access_token}`'
      flows:
        authorizationCode:
          authorizationUrl: /oauth2/v1/authorize
          tokenUrl: /oauth2/v1/token
          scopes:
            okta.myaccount.email.manage: Write access to user emails
            okta.myaccount.email.read: Read access to user emails
            okta.myaccount.phone.manage: Write access to user phones
            okta.myaccount.phone.read: Read access to user phones
            okta.myaccount.profile.manage: Write access to user profile & schema
            okta.myaccount.profile.read: Read access to user profile & schema
